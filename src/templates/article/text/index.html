<div class="row ph-md-margin-bottom">
  <div class="col-md-12">
    <a href="#{{'article.comments.new' | routeSegmentUrl}}"
      class="btn btn-primary pull-right" ng-disabled="!auth.user">
      <i class="fa fa-fw fa-plus"></i> Add general comment
    </a>
    <div class="clearfix"></div>
  </div>
</div>
<div class="row">
  <!--actual text-->
  <pdf url="{{article.url}}" offset-px="offsetPx" class="col-md-11"></pdf>
  <!--column for margin notes-->
  <div id="annotation-column" class="col-md-1">
    <inline-annotation
      ng-repeat="discussion in article.discussions | filter:
      {serializedSelection: '!undefined'}"
      title='discussion.title'
      body='discussion.body'
      author='discussion.originalAnnotation.author'
      >
    </inline-annotation>
    <!-- Don't use ng-if here to keep the element in the DOM tree.
    This makes sure that the entered text is preserved.
    -->
    <create-inline-annotation
      ng-if="auth.user"
      ng-show="offsetPx !== undefined"
      serialized-selection="latestRangySelectionSerialized"
      on-save="article.discussions.push($discussion)"
      on-focus="phHighlightSelection"
      on-blur="phUnhighlightSelection"
      ng-style="
      {
      'top': offsetPx,
      'position': 'relative',
      'border': '1px solid LightGray',
      'width': '100%+200px',
      'margin-left': '-200px',
      'background': 'white'
      }
      "
      >
    </create-inline-annotation>
    <ng-include
      ng-if="!auth.user"
      ng-show="offsetPx !== undefined"
      src="'templates/article/text/inline-annotation-substitute.html'"
      >
    </ng-include>
  </div>
</div>
